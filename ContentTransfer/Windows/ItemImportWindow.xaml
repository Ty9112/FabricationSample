<Window x:Class="FabricationSample.ContentTransfer.Windows.ItemImportWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Import Items" Height="600" Width="620" MinHeight="450" MinWidth="520"
        WindowStartupLocation="CenterScreen" ResizeMode="CanResizeWithGrip"
        Loaded="Window_Loaded">

    <Window.Resources>
        <ResourceDictionary>
            <SolidColorBrush x:Key="PrimaryBrush" Color="#0696D7"/>
            <SolidColorBrush x:Key="PrimaryDarkBrush" Color="#0578AB"/>
            <SolidColorBrush x:Key="DarkBrush" Color="#3d3d3d"/>
            <SolidColorBrush x:Key="TextBrush" Color="#333333"/>
            <SolidColorBrush x:Key="BorderBrush" Color="#D0D0D0"/>
            <SolidColorBrush x:Key="LightBrush" Color="#F5F5F5"/>
            <SolidColorBrush x:Key="WarningBrush" Color="#E6A817"/>
            <SolidColorBrush x:Key="SuccessBrush" Color="#2E7D32"/>

            <Style x:Key="PrimaryButton" TargetType="Button">
                <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Height" Value="30"/>
                <Setter Property="Padding" Value="12,4"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    CornerRadius="3" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryDarkBrush}"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#046B96"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="border" Property="Background" Value="#B0B0B0"/>
                                    <Setter Property="Foreground" Value="#E0E0E0"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="SecondaryButton" TargetType="Button">
                <Setter Property="Background" Value="White"/>
                <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Height" Value="30"/>
                <Setter Property="Padding" Value="12,4"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="3" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#E8E8E8"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#D8D8D8"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="border" Property="Background" Value="#F0F0F0"/>
                                    <Setter Property="Foreground" Value="#B0B0B0"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource DarkBrush}" CornerRadius="3" Padding="12,8" Margin="0,0,0,10">
            <TextBlock Text="Import Items" FontSize="16" FontWeight="SemiBold" Foreground="White"/>
        </Border>

        <!-- Package info -->
        <StackPanel Grid.Row="1" Margin="0,0,0,8">
            <TextBlock x:Name="txtPackageInfo" Foreground="{StaticResource TextBrush}" FontSize="12"
                       TextWrapping="Wrap"/>
        </StackPanel>

        <!-- Item list with reference validation -->
        <Border Grid.Row="2" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="3">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel x:Name="pnlItems" Margin="5"/>
            </ScrollViewer>
        </Border>

        <!-- Target folder -->
        <Grid Grid.Row="3" Margin="0,10,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0" Text="Target Folder:" VerticalAlignment="Center" Margin="0,0,8,0"
                       Foreground="{StaticResource TextBrush}" FontSize="13"/>
            <ComboBox x:Name="cboTargetFolder" Grid.Column="1" Height="26" FontSize="12"
                      SelectionChanged="cboTargetFolder_SelectionChanged"/>
            <Button Grid.Column="2" Content="..." Width="30" Height="26" Margin="5,0,0,0"
                    Click="btnBrowseTargetFolder_Click" Style="{StaticResource SecondaryButton}"
                    ToolTip="Browse from item folder tree"/>
        </Grid>

        <!-- Warning summary -->
        <TextBlock x:Name="txtWarningSummary" Grid.Row="4" Margin="0,8,0,0"
                   Foreground="{StaticResource WarningBrush}" FontSize="12" TextWrapping="Wrap"/>

        <!-- Buttons -->
        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button x:Name="btnImport" Content="Import" Width="100"
                    Style="{StaticResource PrimaryButton}" Click="btnImport_Click" IsEnabled="False"/>
            <Button Content="Cancel" Width="100" Margin="10,0,0,0"
                    Style="{StaticResource SecondaryButton}" Click="btnCancel_Click"/>
        </StackPanel>
    </Grid>
</Window>
